# Iteration 3 - Audit #1: Initial Hypotheses Generation

## –î–∞—Ç–∞
2025-10-01

## –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
1. **–ö–æ–¥**: main.py, websocket_handler.py, candle_aggregator.py, signal_processor.py, config.py, trading_api.py
2. **–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –∞—É–¥–∏—Ç—ã**: iteration_1 –∏ iteration_2 —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **–ü—Ä–æ–±–ª–µ–º—ã –∏–∑ iteration_2**:
   - Zero-volume candles: 48.3% (–æ–∂–∏–¥–∞–ª–æ—Å—å ~2.4%)
   - Zero-interval candles: 19.5% (duplicate timestamps)
   - Warmup logging broken (—Ç–æ–ª—å–∫–æ "1/10")
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rolling window (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ memory leak)
   - Volume filter –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 24h window –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ iteration_2:
1. **websocket_handler.py**: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ iteration_1)
2. **config.py**: WARMUP_INTERVALS = 10 (–±—ã–ª–æ 25)
3. **trading_api.py**: Volume filter –∏—Å–ø–æ–ª—å–∑—É–µ—Ç turnover24h
4. **candles_buffer**: –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç (–Ω–µ—Ç rolling window)

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏–∑ –∫–æ–¥–∞:

#### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Rolling Window (–ö–†–ò–¢–ò–ß–ù–û)
```python
# websocket_handler.py:320-321
self.candles_buffer[symbol].append(completed_candle)
```
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞. –í CLAUDE.md —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è "rolling 100-candle limit", –Ω–æ –∫–æ–¥ –µ—ë –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç.

#### 2. Volume Filter –ø–æ 24h –æ–∫–Ω—É (–ü–†–û–ë–õ–ï–ú–ê)
```python
# trading_api.py:129
volume_24h = float(item.get('turnover24h', 0))
```
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–Ω–µ—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º 24h volume –º–æ–≥—É—Ç –∏–º–µ—Ç—å –Ω–∏–∑–∫—É—é —Ç–µ–∫—É—â—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

#### 3. Warmup Logging Interval (–ü–†–û–ë–õ–ï–ú–ê)
```python
# main.py:139-142
if min_candles - last_warmup_log >= 10 or (min_candles == 1 and last_warmup_log == 0):
```
**–ü—Ä–æ–±–ª–µ–º–∞**: –£—Å–ª–æ–≤–∏–µ `>= 10` —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ –¥–ª—è WARMUP_INTERVALS=10.

#### 4. Async Logging Reordering (–ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê)
```python
# config.py:348-355
def log_new_candle(coin: str, candle_data: dict):
    """Log new candle data - async via queue to prevent time drift"""
    if candle_data:
        try:
            _candle_log_queue.put_nowait((coin, candle_data))  # ASYNC!
        except queue.Full:
            pass
```
**–ü—Ä–æ–±–ª–µ–º–∞**: Queue –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–≤–µ—á–∏ –Ω–µ –ø–æ –ø–æ—Ä—è–¥–∫—É.

## –ù–æ–≤—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### H3.1 - Rolling Window –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ö–†–ò–¢–ò–ß–ù–û)
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: candles_buffer —Ä–∞—Å—Ç–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
**–ò—Å—Ç–æ—á–Ω–∏–∫**: websocket_handler.py:320, CLAUDE.md —É–ø–æ–º–∏–Ω–∞–µ—Ç "rolling 100-candle limit"
**–í–ª–∏—è–Ω–∏–µ**: –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏, —Ä–æ—Å—Ç RSS –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö–†–ò–¢–ò–ß–ù–û
**–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä candles_buffer —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã

### H3.2 - Volume Filter –ø–æ 24h –æ–∫–Ω—É (–ö–†–ò–¢–ò–ß–ù–û)
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: MIN_DAILY_VOLUME —Ñ–∏–ª—å—Ç—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–æ–Ω–µ—Ç–∞–º —Å –Ω–∏–∑–∫–æ–π —Ç–µ–∫—É—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
**–ò—Å—Ç–æ—á–Ω–∏–∫**: 48.3% zero-volume –∏–∑ iteration_2
**–í–ª–∏—è–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∏–∑–∫–æ–∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–Ω–µ—Ç, waste resources
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üî¥ –ö–†–ò–¢–ò–ß–ù–û
**–í–∞–ª–∏–¥–∞—Ü–∏—è**: –°—Ä–∞–≤–Ω–∏—Ç—å 24h volume —Å 1h/4h volume –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–æ–Ω–µ—Ç

### H3.3 - Warmup Logging Interval (–í–ê–ñ–ù–û)
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –£—Å–ª–æ–≤–∏–µ `>= 10` –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è WARMUP_INTERVALS=10
**–ò—Å—Ç–æ—á–Ω–∏–∫**: –¢–æ–ª—å–∫–æ "1/10" –ª–æ–≥ –∏–∑ iteration_2
**–í–ª–∏—è–Ω–∏–µ**: –ù–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ warmup
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: ‚ö†Ô∏è –í–ê–ñ–ù–û
**–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ò–∑–º–µ–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### H3.4 - Async Logging Reordering (–í–ê–ñ–ù–û)
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: Async queue –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–µ—á–∏ –º–µ—Å—Ç–∞–º–∏
**–ò—Å—Ç–æ—á–Ω–∏–∫**: 19.5% zero-interval –∏–∑ iteration_2
**–í–ª–∏—è–Ω–∏–µ**: –î—É–±–ª–∏–∫–∞—Ç—ã –≤ –ª–æ–≥–∞—Ö, –ø—É—Ç–∞–Ω–∏—Ü–∞ –≤ –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: ‚ö†Ô∏è –í–ê–ñ–ù–û
**–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Å–≤–µ—á–µ–π –≤ websocket.json

### H3.5 - Forward-fill –¥–ª—è –Ω–∏–∑–∫–æ–∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–Ω–µ—Ç (–í–ê–ñ–ù–û)
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: Forward-fill —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–µ—Ç —Å –Ω–∏–∑–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
**–ò—Å—Ç–æ—á–Ω–∏–∫**: 48.3% zero-volume –∏–∑ iteration_2
**–í–ª–∏—è–Ω–∏–µ**: –ú–Ω–æ–≥–æ –ø—É—Å—Ç—ã—Ö —Å–≤–µ—á–µ–π, waste processing
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: ‚ö†Ô∏è –í–ê–ñ–ù–û
**–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ volume filter –∏–ª–∏ –≤ forward-fill –ª–æ–≥–∏–∫–µ

### H3.6 - Signal criteria —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ (–ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–û)
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: 0 TRUE signals –∑–∞ 240 —Å–µ–∫—É–Ω–¥ –∏–∑ iteration_2
**–ò—Å—Ç–æ—á–Ω–∏–∫**: 0 TRUE, 8148 FALSE signals
**–í–ª–∏—è–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: ‚úÖ –°–†–ï–î–ù–ò–ô
**–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –º–æ–Ω–µ—Ç

## –ü–ª–∞–Ω –≤–∞–ª–∏–¥–∞—Ü–∏–∏

1. **H3.1 & H3.2** - –ó–∞–ø—É—Å—Ç–∏—Ç—å 5-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–µ—Å—Ç —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –ø–∞–º—è—Ç–∏ –∏ –±—É—Ñ–µ—Ä–∞
2. **H3.3** - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å —Ñ–∏–∫—Å–æ–º –ª–æ–≥–∏–∫–∏
3. **H3.4** - –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—è–¥–∫–∞ —Å–≤–µ—á–µ–π –≤ –ª–æ–≥–∞—Ö
4. **H3.5** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å —Å volume filter
5. **H3.6** - –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ —Å–∏–≥–Ω–∞–ª–æ–≤

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –í–∞–ª–∏–¥–Ω—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã (–ø—Ä–æ–≥–Ω–æ–∑):
- H3.1 (Rolling Window) - –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
- H3.2 (Volume Filter) - –í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å  
- H3.3 (Warmup Logging) - –°—Ä–µ–¥–Ω—è—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å

### –°–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:
- H3.6 (Signal criteria) - –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ